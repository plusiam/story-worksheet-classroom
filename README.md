# 스토리 구성 웹학습지 - 학급 모드 (GAS)

> ⚠️ **개인 모드와 완전히 분리된 시스템입니다.**
> 개인 모드는 [personal-app/](../personal-app/)을 참조하세요.

## 🎯 개요

초등학생을 위한 4컷 스토리 구성 웹학습지입니다.
**"점조직 모델"**로 설계되어 각 교사가 독립적인 시스템을 운영합니다.

### 점조직 모델이란?

```
┌─────────────────────────────────────────────┐
│           📦 원본 템플릿 (이 프로젝트)         │
│                                             │
│  교사 A: "사본 만들기" → 독립된 시스템 운영    │
│  교사 B: "사본 만들기" → 독립된 시스템 운영    │
│  교사 C: "사본 만들기" → 독립된 시스템 운영    │
└─────────────────────────────────────────────┘
```

- 각 교사가 자신만의 스프레드시트 + 웹앱 보유
- 중앙 서버 없음 → 데이터는 교사 구글 드라이브에만 저장
- 완전 무료 (Google Workspace 무료 한도 내)
- 학생 개인정보 보호 (교사 계정에만 저장)

## ✨ 주요 기능

### 학생용
- 🔑 PIN 로그인 / QR 코드 로그인
- 📝 4컷 스토리 작성 (기-승-전-결)
- 💾 작품 자동 저장
- 📤 작품 내보내기 (JSON)

### 교사용
- 🧙 초기 설정 마법사
- 👨‍🎓 학생 등록/관리
- 📱 QR 코드 생성 및 배포
- 📊 학생 작품 현황 확인
- 🔐 PIN 기반 관리자 인증

## 📁 파일 구조

```
classroom-gas/
├── Code.gs              # 메인 진입점
├── Utils.gs             # 유틸리티 함수
├── Auth.gs              # 인증 (로그인, PIN)
├── Student.gs           # 학생 관리
├── Work.gs              # 작품 관리
├── Settings.gs          # 설정 관리
│
├── Index.html           # 메인 HTML
├── Css.html             # 스타일시트
├── JavaScript.html      # 공통 JavaScript
├── Router.html          # 라우터
├── Components.html      # 공통 컴포넌트
│
├── LandingPage.html     # 첫 화면 (초기 설정 전)
├── StudentLogin.html    # 학생 로그인
├── StudentPinSetup.html # 학생 PIN 설정
├── StudentMain.html     # 학생 메인
├── StoryCreator.html    # 작품 편집
│
├── TeacherLogin.html    # 교사 로그인
├── TeacherSetupWizard.html  # 초기 설정
├── TeacherDashboard.html    # 대시보드
│
└── appsscript.json      # Apps Script 설정
```

## 🚀 설치 방법

### 방법 1: 템플릿 복사 (권장)

1. 📋 템플릿 스프레드시트 링크 클릭
2. **파일 > 사본 만들기** 클릭
3. 내 드라이브에 저장
4. **확장 프로그램 > Apps Script** 열기
5. **배포 > 새 배포** 클릭
   - 유형: 웹 앱
   - 실행 대상: 나
   - 액세스: 모든 사용자
6. 배포된 URL로 접속하여 초기 설정

### 방법 2: 수동 설치

1. 새 Google 스프레드시트 생성
2. 확장 프로그램 > Apps Script
3. 각 `.gs` 파일 내용 복사
4. 각 `.html` 파일 추가
5. 웹앱 배포
6. `?mode=teacher`로 접속하여 초기 설정

## 📖 사용 방법

### 교사

1. 웹앱 URL + `?mode=teacher` 접속
2. 초기 설정 마법사 완료
   - 선생님 정보 입력
   - 관리자 PIN 설정
   - 학급 정보 입력
3. 학생 명단 등록 (개별 또는 CSV)
4. QR 코드 출력 또는 URL 공유

### 학생

1. QR 코드 스캔 또는 URL 접속
2. 이름 + 번호 입력
3. PIN 설정 (첫 접속 시)
4. 4컷 스토리 작성!

## 🗄️ 데이터 구조

### STUDENTS 시트
| 컬럼 | 설명 |
|------|------|
| 이름 | 학생 이름 |
| 번호 | 출석 번호 (1-100) |
| PIN해시 | SHA-256 해시 |
| 토큰 | QR 로그인용 |
| 등록일 | 등록 일시 |
| 마지막접속 | 마지막 접속 |
| 상태 | pending/active/inactive |

### WORKS_STEP1/2/3 시트
| 컬럼 | 설명 |
|------|------|
| 학생이름 | 학생 이름 |
| 학생번호 | 출석 번호 |
| 작품데이터 | JSON 문자열 |
| 생성일 | 생성 일시 |
| 수정일 | 수정 일시 |
| 완료여부 | TRUE/FALSE |
| 상태 | draft/submitted/published |

### SETTINGS 시트
Key-Value 형식으로 설정 저장

## 🔒 보안

- PIN: SHA-256 + Salt 해시 저장
- 토큰: UUID 기반 생성
- 입력값 검증 + HTML 이스케이프
- 교사 인증: PIN 또는 Google 계정

## ⚠️ 제한사항

- Google Apps Script 일일 실행 한도
- 스프레드시트 셀 수 제한 (약 1000만 셀)
- 학급당 30-40명 권장

## 📝 버전

- **버전**: 1.0.0
- **작성일**: 2026-01-17
- **호환성**: Google Apps Script V8

## 📄 라이선스

교육 목적으로 자유롭게 사용 가능
