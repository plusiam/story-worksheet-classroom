<script>
  /* ============================================
     ë˜ë¦¬ AI ì±„íŒ… íŒ¨ë„
     ============================================ */

  // ë˜ë¦¬ íŒ¨ë„ ìƒíƒœ
  const TtoriState = {
    isOpen: false,
    isLoading: false,
    currentSessionId: null,
    sessions: [],
    messages: [],
    workContext: null
  };

  /**
   * ë˜ë¦¬ íŒ¨ë„ ë Œë”ë§
   */
  function renderTtoriPanel() {
    // íŒ¨ë„ì´ ì´ë¯¸ ìˆìœ¼ë©´ ì‚­ì œ
    const existing = document.getElementById('ttori-panel');
    if (existing) existing.remove();

    const panel = document.createElement('div');
    panel.id = 'ttori-panel';
    panel.className = 'ttori-panel';
    panel.innerHTML = `
      <div class="ttori-panel-inner">
        <!-- í—¤ë” -->
        <div class="ttori-header">
          <div class="ttori-header-left">
            <span class="ttori-avatar">ğŸ¤</span>
            <div>
              <h3 class="ttori-title">ë˜ë¦¬</h3>
              <p class="ttori-subtitle">ìŠ¤í† ë¦¬ ë„ìš°ë¯¸</p>
            </div>
          </div>
          <div class="ttori-header-right">
            <button class="ttori-btn-icon" onclick="showTtoriSessions()" title="ì´ì „ ëŒ€í™”">
              ğŸ“‚
            </button>
            <button class="ttori-btn-icon" onclick="closeTtoriPanel()" title="ë‹«ê¸°">
              âœ•
            </button>
          </div>
        </div>

        <!-- ë©”ì‹œì§€ ì˜ì—­ -->
        <div class="ttori-messages" id="ttori-messages">
          <div class="ttori-welcome">
            <div class="ttori-welcome-icon">ğŸ¤</div>
            <h4>ì•ˆë…•! ë‚˜ëŠ” ë˜ë¦¬ì•¼!</h4>
            <p>ìŠ¤í† ë¦¬ ë§Œë“¤ ë•Œ ë„ì™€ì¤„ê²Œ.<br>ë¬´ì—‡ì´ë“  ë¬¼ì–´ë´!</p>
          </div>
        </div>

        <!-- ì…ë ¥ ì˜ì—­ -->
        <div class="ttori-input-area">
          <div class="ttori-input-wrapper">
            <textarea
              id="ttori-input"
              class="ttori-input"
              placeholder="ë˜ë¦¬ì—ê²Œ ë¬¼ì–´ë³´ì„¸ìš”..."
              rows="1"
              onkeydown="handleTtoriKeydown(event)"
              oninput="autoResizeTextarea(this)"
            ></textarea>
            <button class="ttori-send-btn" onclick="sendTtoriMessage()" id="ttori-send-btn">
              <span>ë³´ë‚´ê¸°</span>
            </button>
          </div>
          <p class="ttori-hint">Enterë¡œ ì „ì†¡, Shift+Enterë¡œ ì¤„ë°”ê¿ˆ</p>
        </div>
      </div>
    `;

    document.body.appendChild(panel);

    // ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
    setTimeout(() => panel.classList.add('open'), 10);
  }

  /**
   * ë˜ë¦¬ íŒ¨ë„ ì—´ê¸°
   */
  async function openTtoriPanel(workContext) {
    TtoriState.workContext = workContext || getCurrentWorkContext();
    TtoriState.isOpen = true;

    renderTtoriPanel();

    // AI í™œì„±í™” ìƒíƒœ í™•ì¸
    try {
      const result = await callApi('checkAiEnabled');
      if (!result.enabled) {
        showTtoriSystemMessage('AI ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆì–´ìš”. ì„ ìƒë‹˜ê»˜ ë¬¸ì˜í•´ì£¼ì„¸ìš”!', 'warning');
        return;
      }

      // ê¸°ì¡´ ì„¸ì…˜ ë¶ˆëŸ¬ì˜¤ê¸° ì‹œë„
      await loadTtoriSessionList();

      // ë§ˆì§€ë§‰ ì„¸ì…˜ì´ ìˆìœ¼ë©´ ë¶ˆëŸ¬ì˜¤ê¸°
      if (TtoriState.sessions.length > 0) {
        const lastSession = TtoriState.sessions[0];
        await loadTtoriSessionMessages(lastSession.sessionId);
      }

    } catch (error) {
      console.error('ë˜ë¦¬ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
      showTtoriSystemMessage('ë˜ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ë¬¸ì œê°€ ìƒê²¼ì–´ìš”.', 'error');
    }
  }

  /**
   * ë˜ë¦¬ íŒ¨ë„ ë‹«ê¸°
   */
  function closeTtoriPanel() {
    const panel = document.getElementById('ttori-panel');
    if (panel) {
      panel.classList.remove('open');
      setTimeout(() => panel.remove(), 300);
    }
    TtoriState.isOpen = false;
  }

  /**
   * ë˜ë¦¬ íŒ¨ë„ í† ê¸€
   */
  function toggleTtoriPanel(workContext) {
    if (TtoriState.isOpen) {
      closeTtoriPanel();
    } else {
      openTtoriPanel(workContext);
    }
  }

  /**
   * ì„¸ì…˜ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
   */
  async function loadTtoriSessionList() {
    if (!AppState.currentUser) return;

    try {
      const result = await callApi('getTtoriSessions', {
        studentName: AppState.currentUser.name,
        studentNumber: AppState.currentUser.number
      });

      if (result.success) {
        TtoriState.sessions = result.data || [];
      }
    } catch (error) {
      console.error('ì„¸ì…˜ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', error);
    }
  }

  /**
   * ì„¸ì…˜ ë©”ì‹œì§€ ë¶ˆëŸ¬ì˜¤ê¸°
   */
  async function loadTtoriSessionMessages(sessionId) {
    try {
      showTtoriLoading(true);

      const result = await callApi('loadTtoriSession', { sessionId });

      if (result.success) {
        TtoriState.currentSessionId = sessionId;
        TtoriState.messages = result.data.messages || [];
        renderTtoriMessages();
      }
    } catch (error) {
      console.error('ì„¸ì…˜ ë©”ì‹œì§€ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', error);
    } finally {
      showTtoriLoading(false);
    }
  }

  /**
   * ë©”ì‹œì§€ ì „ì†¡
   */
  async function sendTtoriMessage() {
    const input = document.getElementById('ttori-input');
    const message = input.value.trim();

    if (!message || TtoriState.isLoading) return;

    input.value = '';
    autoResizeTextarea(input);

    // ì„¸ì…˜ì´ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±
    if (!TtoriState.currentSessionId) {
      const createResult = await callApi('createTtoriSession', {
        studentName: AppState.currentUser.name,
        studentNumber: AppState.currentUser.number,
        step: TtoriState.workContext?.step || 1
      });

      if (!createResult.success) {
        showTtoriSystemMessage(createResult.error, 'error');
        return;
      }

      TtoriState.currentSessionId = createResult.data.sessionId;
    }

    // ì‚¬ìš©ì ë©”ì‹œì§€ í‘œì‹œ
    addTtoriMessage('user', message);

    // AI ì‘ë‹µ ìš”ì²­
    showTtoriLoading(true);

    try {
      const result = await callApi('sendMessageToTtori', {
        sessionId: TtoriState.currentSessionId,
        message: message,
        workContext: TtoriState.workContext
      });

      if (result.success) {
        addTtoriMessage('assistant', result.data.response);
      } else {
        showTtoriSystemMessage(result.error, 'error');
      }
    } catch (error) {
      console.error('ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨:', error);
      showTtoriSystemMessage('ë©”ì‹œì§€ ì „ì†¡ì— ì‹¤íŒ¨í–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”!', 'error');
    } finally {
      showTtoriLoading(false);
    }
  }

  /**
   * ë©”ì‹œì§€ ì¶”ê°€ (UI)
   */
  function addTtoriMessage(role, content) {
    TtoriState.messages.push({ role, content, timestamp: new Date().toISOString() });
    renderTtoriMessages();
  }

  /**
   * ë©”ì‹œì§€ ëª©ë¡ ë Œë”ë§
   */
  function renderTtoriMessages() {
    const container = document.getElementById('ttori-messages');
    if (!container) return;

    if (TtoriState.messages.length === 0) {
      container.innerHTML = `
        <div class="ttori-welcome">
          <div class="ttori-welcome-icon">ğŸ¤</div>
          <h4>ì•ˆë…•! ë‚˜ëŠ” ë˜ë¦¬ì•¼!</h4>
          <p>ìŠ¤í† ë¦¬ ë§Œë“¤ ë•Œ ë„ì™€ì¤„ê²Œ.<br>ë¬´ì—‡ì´ë“  ë¬¼ì–´ë´!</p>
        </div>
      `;
      return;
    }

    container.innerHTML = TtoriState.messages.map(msg => `
      <div class="ttori-message ${msg.role}">
        ${msg.role === 'assistant' ? '<span class="ttori-msg-avatar">ğŸ¤</span>' : ''}
        <div class="ttori-msg-content">
          ${formatTtoriMessage(msg.content)}
        </div>
      </div>
    `).join('');

    // ìŠ¤í¬ë¡¤ í•˜ë‹¨ìœ¼ë¡œ
    container.scrollTop = container.scrollHeight;
  }

  /**
   * ë©”ì‹œì§€ í¬ë§·íŒ… (ë§ˆí¬ë‹¤ìš´ ê°„ë‹¨ ì²˜ë¦¬)
   */
  function formatTtoriMessage(content) {
    return content
      .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
      .replace(/\n/g, '<br>')
      .replace(/\*\*([ABC])\)\*\*/g, '<span class="ttori-option">$1)</span>');
  }

  /**
   * ì‹œìŠ¤í…œ ë©”ì‹œì§€ í‘œì‹œ
   */
  function showTtoriSystemMessage(message, type = 'info') {
    const container = document.getElementById('ttori-messages');
    if (!container) return;

    const msgEl = document.createElement('div');
    msgEl.className = `ttori-system-message ${type}`;
    msgEl.innerHTML = `
      <span class="ttori-system-icon">${type === 'error' ? 'ğŸ˜…' : type === 'warning' ? 'âš ï¸' : 'â„¹ï¸'}</span>
      <span>${message}</span>
    `;

    container.appendChild(msgEl);
    container.scrollTop = container.scrollHeight;
  }

  /**
   * ë¡œë”© ìƒíƒœ í‘œì‹œ
   */
  function showTtoriLoading(show) {
    TtoriState.isLoading = show;

    const sendBtn = document.getElementById('ttori-send-btn');
    if (sendBtn) {
      sendBtn.disabled = show;
      sendBtn.innerHTML = show ? '<span class="ttori-spinner"></span>' : '<span>ë³´ë‚´ê¸°</span>';
    }

    if (show) {
      const container = document.getElementById('ttori-messages');
      if (container) {
        const loadingEl = document.createElement('div');
        loadingEl.className = 'ttori-message assistant loading';
        loadingEl.id = 'ttori-loading-msg';
        loadingEl.innerHTML = `
          <span class="ttori-msg-avatar">ğŸ¤</span>
          <div class="ttori-msg-content">
            <span class="ttori-typing">
              <span></span><span></span><span></span>
            </span>
          </div>
        `;
        container.appendChild(loadingEl);
        container.scrollTop = container.scrollHeight;
      }
    } else {
      const loadingMsg = document.getElementById('ttori-loading-msg');
      if (loadingMsg) loadingMsg.remove();
    }
  }

  /**
   * ì´ì „ ëŒ€í™” ëª©ë¡ í‘œì‹œ
   */
  function showTtoriSessions() {
    const container = document.getElementById('ttori-messages');
    if (!container) return;

    const sessions = TtoriState.sessions;

    container.innerHTML = `
      <div class="ttori-sessions-view">
        <h4>ğŸ“‚ ì´ì „ ëŒ€í™” (${sessions.length}/3)</h4>
        ${sessions.length === 0 ? `
          <p class="ttori-empty">ì•„ì§ ëŒ€í™” ê¸°ë¡ì´ ì—†ì–´ìš”.</p>
        ` : `
          <div class="ttori-session-list">
            ${sessions.map(s => `
              <div class="ttori-session-item" onclick="selectTtoriSession('${s.sessionId}')">
                <div class="ttori-session-info">
                  <span class="ttori-session-title">${escapeHtml(s.title)}</span>
                  <span class="ttori-session-date">${formatDate(s.updatedAt)}</span>
                </div>
                <span class="ttori-session-count">${s.messageCount}ê°œ</span>
              </div>
            `).join('')}
          </div>
        `}
        <div class="ttori-session-actions">
          <button class="btn btn-primary btn-block" onclick="startNewTtoriSession()">
            âœ¨ ìƒˆ ëŒ€í™” ì‹œì‘
          </button>
          <button class="btn btn-outline btn-block mt-2" onclick="renderTtoriMessages()">
            â† ëŒì•„ê°€ê¸°
          </button>
        </div>
        ${sessions.length >= 3 ? `
          <p class="ttori-warning">âš ï¸ ìƒˆ ëŒ€í™”ë¥¼ ì‹œì‘í•˜ë©´ ê°€ì¥ ì˜¤ë˜ëœ ëŒ€í™”ê°€ ì‚­ì œë©ë‹ˆë‹¤.</p>
        ` : ''}
      </div>
    `;
  }

  /**
   * ì„¸ì…˜ ì„ íƒ
   */
  async function selectTtoriSession(sessionId) {
    await loadTtoriSessionMessages(sessionId);
  }

  /**
   * ìƒˆ ëŒ€í™” ì‹œì‘
   */
  async function startNewTtoriSession() {
    TtoriState.currentSessionId = null;
    TtoriState.messages = [];
    renderTtoriMessages();

    // ì…ë ¥ì°½ í¬ì»¤ìŠ¤
    setTimeout(() => {
      const input = document.getElementById('ttori-input');
      if (input) input.focus();
    }, 100);
  }

  /**
   * í˜„ì¬ ì‘í’ˆ ì»¨í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
   */
  function getCurrentWorkContext() {
    // StoryCreatorì—ì„œ í˜„ì¬ ì‘í’ˆ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    if (typeof getCurrentStoryData === 'function') {
      return getCurrentStoryData();
    }
    return null;
  }

  /**
   * í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ì²˜ë¦¬
   */
  function handleTtoriKeydown(event) {
    if (event.key === 'Enter' && !event.shiftKey) {
      event.preventDefault();
      sendTtoriMessage();
    }
  }

  /**
   * í…ìŠ¤íŠ¸ì˜ì—­ ìë™ ë†’ì´ ì¡°ì ˆ
   */
  function autoResizeTextarea(textarea) {
    textarea.style.height = 'auto';
    textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
  }

  /**
   * ë‚ ì§œ í¬ë§·íŒ…
   */
  function formatDate(isoString) {
    const date = new Date(isoString);
    const month = date.getMonth() + 1;
    const day = date.getDate();
    return `${month}ì›” ${day}ì¼`;
  }
</script>

<!-- ë˜ë¦¬ íŒ¨ë„ ìŠ¤íƒ€ì¼ -->
<style>
  /* ë˜ë¦¬ íŒ¨ë„ ì»¨í…Œì´ë„ˆ */
  .ttori-panel {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 380px;
    max-width: calc(100vw - 40px);
    height: 560px;
    max-height: calc(100vh - 100px);
    background: white;
    border-radius: 20px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
    z-index: 9999;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transform: translateY(100%) scale(0.9);
    opacity: 0;
    transition: all 0.3s ease;
  }

  .ttori-panel.open {
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  .ttori-panel-inner {
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  /* í—¤ë” */
  .ttori-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: linear-gradient(135deg, #FFD93D 0%, #FF9F1C 100%);
    color: white;
  }

  .ttori-header-left {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .ttori-avatar {
    font-size: 2rem;
    background: white;
    border-radius: 50%;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ttori-title {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 700;
  }

  .ttori-subtitle {
    margin: 0;
    font-size: 0.8rem;
    opacity: 0.9;
  }

  .ttori-header-right {
    display: flex;
    gap: 8px;
  }

  .ttori-btn-icon {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.2s;
  }

  .ttori-btn-icon:hover {
    background: rgba(255,255,255,0.3);
  }

  /* ë©”ì‹œì§€ ì˜ì—­ */
  .ttori-messages {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    background: #f8f9fa;
  }

  /* í™˜ì˜ ë©”ì‹œì§€ */
  .ttori-welcome {
    text-align: center;
    padding: 40px 20px;
  }

  .ttori-welcome-icon {
    font-size: 4rem;
    margin-bottom: 16px;
  }

  .ttori-welcome h4 {
    margin: 0 0 8px 0;
    color: var(--text-dark);
  }

  .ttori-welcome p {
    margin: 0;
    color: var(--text-light);
    font-size: 0.95rem;
  }

  /* ë©”ì‹œì§€ ë²„ë¸” */
  .ttori-message {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
    animation: ttori-fade-in 0.3s ease;
  }

  @keyframes ttori-fade-in {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .ttori-message.user {
    flex-direction: row-reverse;
  }

  .ttori-msg-avatar {
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .ttori-msg-content {
    max-width: 75%;
    padding: 12px 16px;
    border-radius: 18px;
    font-size: 0.95rem;
    line-height: 1.5;
  }

  .ttori-message.assistant .ttori-msg-content {
    background: white;
    color: var(--text-dark);
    border-bottom-left-radius: 4px;
  }

  .ttori-message.user .ttori-msg-content {
    background: #FFD93D;
    color: #333;
    border-bottom-right-radius: 4px;
  }

  .ttori-option {
    display: inline-block;
    background: #FF9F1C;
    color: white;
    padding: 2px 8px;
    border-radius: 10px;
    font-weight: 600;
    margin-right: 4px;
  }

  /* ì‹œìŠ¤í…œ ë©”ì‹œì§€ */
  .ttori-system-message {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 16px;
    border-radius: 12px;
    margin-bottom: 12px;
    font-size: 0.9rem;
  }

  .ttori-system-message.error {
    background: #fee2e2;
    color: #dc2626;
  }

  .ttori-system-message.warning {
    background: #fef3c7;
    color: #d97706;
  }

  .ttori-system-message.info {
    background: #dbeafe;
    color: #2563eb;
  }

  /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
  .ttori-typing {
    display: flex;
    gap: 4px;
  }

  .ttori-typing span {
    width: 8px;
    height: 8px;
    background: #ccc;
    border-radius: 50%;
    animation: ttori-bounce 1.4s infinite ease-in-out both;
  }

  .ttori-typing span:nth-child(1) { animation-delay: -0.32s; }
  .ttori-typing span:nth-child(2) { animation-delay: -0.16s; }

  @keyframes ttori-bounce {
    0%, 80%, 100% { transform: scale(0); }
    40% { transform: scale(1); }
  }

  .ttori-spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid #fff;
    border-top-color: transparent;
    border-radius: 50%;
    animation: ttori-spin 0.8s linear infinite;
  }

  @keyframes ttori-spin {
    to { transform: rotate(360deg); }
  }

  /* ì…ë ¥ ì˜ì—­ */
  .ttori-input-area {
    padding: 12px 16px;
    background: white;
    border-top: 1px solid #eee;
  }

  .ttori-input-wrapper {
    display: flex;
    gap: 8px;
    align-items: flex-end;
  }

  .ttori-input {
    flex: 1;
    border: 2px solid #eee;
    border-radius: 20px;
    padding: 10px 16px;
    font-size: 0.95rem;
    resize: none;
    max-height: 120px;
    outline: none;
    transition: border-color 0.2s;
  }

  .ttori-input:focus {
    border-color: #FFD93D;
  }

  .ttori-send-btn {
    background: #FFD93D;
    color: #333;
    border: none;
    border-radius: 20px;
    padding: 10px 20px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }

  .ttori-send-btn:hover:not(:disabled) {
    background: #FF9F1C;
    color: white;
  }

  .ttori-send-btn:disabled {
    opacity: 0.7;
    cursor: not-allowed;
  }

  .ttori-hint {
    margin: 8px 0 0 0;
    font-size: 0.75rem;
    color: var(--text-light);
    text-align: center;
  }

  /* ì„¸ì…˜ ëª©ë¡ */
  .ttori-sessions-view {
    padding: 16px;
  }

  .ttori-sessions-view h4 {
    margin: 0 0 16px 0;
  }

  .ttori-empty {
    text-align: center;
    color: var(--text-light);
    padding: 20px;
  }

  .ttori-session-list {
    margin-bottom: 16px;
  }

  .ttori-session-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: white;
    border-radius: 12px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .ttori-session-item:hover {
    background: #f0f0f0;
    transform: translateX(4px);
  }

  .ttori-session-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .ttori-session-title {
    font-weight: 500;
    color: var(--text-dark);
  }

  .ttori-session-date {
    font-size: 0.8rem;
    color: var(--text-light);
  }

  .ttori-session-count {
    font-size: 0.8rem;
    color: var(--text-light);
    background: #f0f0f0;
    padding: 4px 8px;
    border-radius: 10px;
  }

  .ttori-session-actions {
    margin-top: 16px;
  }

  .ttori-warning {
    margin-top: 12px;
    padding: 12px;
    background: #fef3c7;
    border-radius: 8px;
    font-size: 0.85rem;
    color: #d97706;
    text-align: center;
  }

  /* ë˜ë¦¬ í˜¸ì¶œ ë²„íŠ¼ (í”Œë¡œíŒ…) */
  .ttori-fab {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #FFD93D 0%, #FF9F1C 100%);
    border: none;
    box-shadow: 0 4px 20px rgba(255, 159, 28, 0.4);
    cursor: pointer;
    font-size: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9998;
    transition: all 0.3s;
  }

  .ttori-fab:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 25px rgba(255, 159, 28, 0.5);
  }

  .ttori-fab.hidden {
    display: none;
  }

  /* ëª¨ë°”ì¼ ëŒ€ì‘ */
  @media (max-width: 480px) {
    .ttori-panel {
      width: 100%;
      height: 100%;
      max-width: 100%;
      max-height: 100%;
      bottom: 0;
      right: 0;
      border-radius: 0;
    }

    .ttori-fab {
      bottom: 80px;
    }
  }
</style>
